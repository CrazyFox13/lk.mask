# Проверка SSH-ключа для деплоя

Если шаг «Test SSH connection» падает с `unable to authenticate`, проверьте:

## 1. Секрет в GitHub

- Репозиторий → **Settings** → **Secrets and variables** → **Actions**
- Должен быть секрет **SSH_PRIVATE_KEY**
- Значение: **полностью** скопировать из `SSH_KEY_FOR_GITHUB.txt` (все 4 строки, включая `-----BEGIN...` и `-----END...`)

## 2. Публичный ключ на сервере

На сервере должен быть добавлен **публичный** ключ, соответствующий этому приватному.

Публичный ключ из вашего ключа можно получить локально:
```bash
# Если ключ в SSH_KEY_FOR_GITHUB.txt — это приватный ключ.
# Публичный обычно в файле с расширением .pub или так:
ssh-keygen -y -f SSH_KEY_FOR_GITHUB.txt 2>/dev/null || cat SSH_KEY_FOR_GITHUB.txt
```

На сервере проверьте:
```bash
cat ~/.ssh/authorized_keys
# Должна быть строка, начинающаяся с ssh-ed25519 или ssh-rsa, соответствующая вашему ключу
```

Если строки нет — добавьте вывод команды `ssh-keygen -y -f SSH_KEY_FOR_GITHUB.txt` в `~/.ssh/authorized_keys` на сервере (в одну строку).

## 3. Имя пользователя и хост

Секреты **SSH_USER** и **SSH_HOST** должны совпадать с теми, под которыми вы вручную заходите по SSH (например `mack-user` и `79.174.12.78`).
